## ðŸ”Ž ë¬¸ì œ ì½”ë“œ

```js
const shape = {
  radius: 10,
  diameter() {
    return this.radius * 2;
  },
  perimeter: () => 2 * Math.PI * this.radius,
};

console.log(shape.diameter());
console.log(shape.perimeter());
```

## âœ… í•´ì„¤

- diameter()ëŠ” ì¼ë°˜ í•¨ìˆ˜ì´ë¯€ë¡œ thisê°€ shapeë¥¼ ê°€ë¦¬ì¼œ 10 \* 2 = 20ìž…ë‹ˆë‹¤.
- perimeterëŠ” í™”ì‚´í‘œ í•¨ìˆ˜ì´ë©°, thisëŠ” shapeê°€ ì•„ë‹ˆë¼ ìƒìœ„ ìŠ¤ì½”í”„ì˜ thisë¥¼ ê°€ë¦¬ì¼œ undefined.radiusë¡œ NaNìž…ë‹ˆë‹¤.

## ðŸ§  ê´€ë ¨ ê°œë…

### 1. this ë°”ì¸ë”©

: ìžë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ thisê°€ ì°¸ì¡°í•˜ëŠ” ê²ƒì€ í•¨ìˆ˜ê°€ í˜¸ì¶œë˜ëŠ” ë°©ì‹ì— ë”°ë¼ ê²°ì •ë©ë‹ˆë‹¤

#### 1.1 ê¸°ë³¸ ë°”ì¸ë”© (Default Binding)

- thisëŠ” ì „ì—­ ê°ì²´ì— ë°”ì¸ë”©ë©ë‹ˆë‹¤.
- ë¸Œë¼ìš°ì € í™˜ê²½ì˜ ê²½ìš° window, Node.js í™˜ê²½ì¸ ê²½ìš°ëŠ” global

```js
function test() {
  const a = 10;
  console.log(this.a);
}

test(); // undefined
```

- ìœ„ì™€ ê°™ì€ ê²½ìš°ì—ëŠ” thisëŠ” ì „ì—­ ê°ì²´ì— ë°”ì¸ë”©ë˜ê³  ì „ì—­ê°ì²´ì—ëŠ” aë¼ëŠ” í”„ë¡œí¼í‹°ê°€ ì—†ê¸° ë•Œë¬¸ì— undefinedê°€ ì¶œë ¥ë©ë‹ˆë‹¤.
- ì „ì—­ê°ì²´ì— aë¼ëŠ” í”„ë¡œí¼í‹°ê°€ ìžˆëŠ” ê²½ìš° í•´ë‹¹ aí”„ë¡œí¼í‹°ì˜ ê°’ì„ ì¶œë ¥í•˜ê²Œ ë©ë‹ˆë‹¤.

```js
window.a = 10;

function test() {
  console.log(this.a);
}

test(); // 10
```

- ì—„ê²©ëª¨ë“œì—ì„œëŠ” ê¸°ë³¸ ë°”ì¸ë”© ëŒ€ìƒì—ì„œ ì „ì—­ê°ì²´ëŠ” ì œì™¸ë©ë‹ˆë‹¤

```js
window.a = 10;

function test() {
  console.log(this.a);
}

test(); // TypeError: Cannot read property 'a' of undefined
```

#### 1.2 ì•”ì‹œì  ë°”ì¸ë”©

- í•¨ìˆ˜ê°€ ê°ì²´ì˜ ë©”ì„œë“œë¡œì„œ í˜¸ì¶œë˜ëŠ” ìƒí™©ì—ì„œ thisê°€ ë°”ì¸ë”©ë˜ëŠ” ê²ƒì„ ë§í•©ë‹ˆë‹¤
- thisëŠ” í•´ë‹¹ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œ ê°ì²´ ì¦‰ ì½˜í…ìŠ¤íŠ¸ ê°ì²´ì— ë°”ì¸ë­ë©ë‹ˆë‹¤

```js
const test = {
  a: 20,
  bar: function () {
    console.log(this.a);
  },
};

test.bar(); // 20
setTimeout(test.bar, 1); // undefined
```

- ì•”ì‹œì  ë°”ì¸ë”©ì„ ì‚¬ìš©í•  ë•Œ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ë¬¸ì œëŠ” ìœ„ì™€ ê°™ì€ ìƒí™©ì—ì„œ í•¨ìˆ˜ë¥¼ ë§¤ê°œë³€ìˆ˜(ì½œë°±)ë¡œ ë„˜ê²¨ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒìž…ë‹ˆë‹¤
- ìœ„ì™€ ê°™ì´ ê°ì²´ì— ì •ì˜ë˜ì–´ìžˆëŠ” í•¨ìˆ˜ì˜ ë ˆí¼ëŸ°ìŠ¤ë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬í•˜ëŠ” ìƒí™©ì—ì„œ undefinedê°€ ë‚˜ì˜µë‹ˆë‹¤
- ì´ëŸ° ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ì´ìœ ëŠ” setTimeoutí•¨ìˆ˜ ì•ˆì— ì „ë‹¬í•œ ì½œë°±ì€ testë¼ëŠ” í•¨ìˆ˜ì˜ ëž˜í¼ëŸ°ìŠ¤ì¼ë¿, testì˜ ì½˜í…ìŠ¤íŠ¸ë¥¼ ê°€ì§€ê³  ìžˆì§€ ì•Šê¸° ë•Œë¬¸ìž…ë‹ˆë‹¤. => ì•”ì‹œì  ë°”ì¸ë”© ì†Œì‹¤
- ì•„ëž˜ì™€ ê°™ì´ í˜¸ì¶œë˜ëŠ” ì½œë°±ì€ test ê°ì²´ì˜ ì½˜í…ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ ì•„ë‹ˆê¸° ë•Œë¬¸ì— thisëŠ” ê¸°ë³¸ ë°”ì¸ë”©ì´ ì ìš©ë˜ì–´ ì „ì—­ ê°ì²´ì— ë°”ì¸ë”© ë©ë‹ˆë‹¤.

```js
function setTimeout(cb, delay) {
  // delay ë§Œí¼ ê¸°ë‹¤ë¦°ë‹¤
  cb(); // ê¸°ë³¸ ë°”ì¸ë”©, bar.test()ê°€ ì•„ë‹Œ test()ì™€ ê°™ë‹¤
}
```

#### 1.3 ëª…ì‹œì  ë°”ì¸ë”©

- ìžë°”ìŠ¤í¬ë¦½íŠ¸ì˜ ëª¨ë“  Function ì€ call(), apply(), bind()ë¼ëŠ” í”„ë¡œí† íƒ€ìž… ë©”ì†Œë“œë¥¼ ê°€ì§€ê³  ìžˆìŠµë‹ˆë‹¤
- ì´ì¤‘ í•˜ë‚˜ë¥¼ í˜¸ì¶œí•¨ìœ¼ë¡œì¨ this ë°”ì¸ë”©ì„ ì½”ë“œì—ì„œ ëª…ì‹œí•˜ëŠ” ê²ƒì„ ëª…ì‹œì  ë°”ì¸ë”©ì´ë¼ê³  í•©ë‹ˆë‹¤
- ì´ë•Œì˜ thisëŠ” ëª…ì‹œí•œ ê°ì²´ì— ë°”ì¸ë”©ë©ë‹ˆë‹¤.

```js
const test = {
  a: 20,
};

function bar() {
  console.log(this.a);
}

// Function í”„ë¡œí† íƒ€ìž… ë©”ì„œë“œ call, applyì˜ ë§¤ê°œë³€ìˆ˜ë¡œ ë°”ì¸ë”©í•  ê°ì²´ë¥¼ ë„˜ê²¨ì£¼ë©´ì„œ bar í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ë•Œì˜ this ì»¨í…ìŠ¤íŠ¸ë¥¼ testë¡œ ì§ì ‘ ë°”ì¸ë”©
// callê³¼ applyì˜ ë™ìž‘ì€ ê°™ì§€ë§Œ ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜ë¡œ ê°ì²´ì˜ ì¸ìžë¥¼ ì „ë‹¬í•´ì£¼ëŠ”ë°(e.g. ìƒì„±ìžì˜ ë§¤ê°œë³€ìˆ˜), callì€ ë§¤ê°œë³€ìˆ˜ì˜ ëª©ë¡, applyëŠ” ë°°ì—´ì„ ë°›ëŠ”ë‹¤ëŠ” ì°¨ì´
bar.call(test); // 20
bar.apply(test); // 20

// í•˜ë“œ ë°”ì¸ë”©
// bind ë©”ì„œë“œëŠ” ë§¤ê°œë³€ìˆ˜ë¡œ ì „ë‹¬ë°›ì€ ì˜¤ë¸Œì íŠ¸ë¡œ thisê°€ ë°”ì¸ë”©ëœ í•¨ìˆ˜ë¥¼ ë°˜í™˜
// í•˜ë“œ ë°”ì¸ë”©ëœ í•¨ìˆ˜ëŠ” ì´í›„ í˜¸ì¶œë  ë•Œë§ˆë‹¤ ì²˜ìŒ ì •í•´ì§„ this ë°”ì¸ë”©ì„ ê°€ì§€ê³  í˜¸ì¶œ
const bound = bar.bind(test);
bound(); // 20
```

#### 1.4 new ë°”ì¸ë”©

- ìžë°”ìŠ¤í¬ë¦½íŠ¸ì˜ new í‚¤ì›Œë“œëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì•žì— new í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒìœ¼ë¡œ ê°ì²´ë¥¼ ì´ˆê¸°í™”í•  ë•Œ ì‚¬ìš©í•˜ëŠ”ë°, ì´ë•Œ ì‚¬ìš©ë˜ëŠ” í•¨ìˆ˜ë¥¼ ìƒì„±ìž í•¨ìˆ˜ë¼ê³  í•©ë‹ˆë‹¤.
- ìƒì„±ìž í•¨ìˆ˜ì—ì„œëŠ” this í‚¤ì›Œë“œë¥¼ í•´ë‹¹ ìƒì„±ìžë¥¼ ì´ìš©í•´ ìƒì„±í•  ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤
- ì•„ëž˜ ì½”ë“œì—ì„œ test í•¨ìˆ˜ê°€ new í‚¤ì›Œë“œì™€ í•¨ê»˜ í˜¸ì¶œë˜ëŠ” ìˆœê°„ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ê³ , ìƒˆë¡œ ìƒì„±ëœ ê°ì²´ê°€ thisë¡œ ë°”ì¸ë”©ë©ë‹ˆë‹¤. ê·¸ë¦¬ê³  ìƒì„±ëœ ê°ì²´ì˜ aë¼ëŠ” í”„ë¡œí¼í‹°ì— 20ì´ë¼ëŠ” ê°’ì´ í• ë‹¹ë˜ê³ , í•´ë‹¹ ê°ì²´ëŠ” testë¼ëŠ” ë³€ìˆ˜ì— í• ë‹¹ë©ë‹ˆë‹¤.

```
function Test() {
  this.a = 20;
}

const test = new Test();

console.log(test.a); // 20
```

#### 1.5 í™”ì‚´í‘œ í•¨ìˆ˜

- ES6ì— ì¶”ê°€ëœ í™”ì‚´í‘œ í•¨ìˆ˜(Arrow Function)ëŠ” thisë¥¼ ë°”ì¸ë”©í•  ë•Œ ì•žì„œ ì„¤ëª…í•œ ê·œì¹™ë“¤ì´ ì ìš©ë˜ì§€ ì•Šê³ , thisì— ì–´íœ˜ì  ìŠ¤ì½”í”„(Lexical scope)ê°€ ì ìš©ë©ë‹ˆë‹¤
- í™”ì‚´í‘œ í•¨ìˆ˜ë¥¼ ì •ì˜í•˜ëŠ” ì‹œì ì˜ ì»¨í…ìŠ¤íŠ¸ ê°ì²´ê°€ thisì— ë°”ì¸ë”© ë©ë‹ˆë‹¤

```js
const test = {
  a: 20,
  bar: function () {
    setTimeout(() => {
      console.log(this.a);
    }, 1);
  },
};

test.bar(); // 20
```
