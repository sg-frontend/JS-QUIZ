```js
function sayHi() {
  console.log(name);
  console.log(age);
  var name = 'Lydia';
  let age = 21;
}

sayHi();
```

## ì •ë‹µ í•´ì„¤

### í•¨ìˆ˜ ë¶„ì„í•˜ê¸°

```js
function sayHi() {
  console.log(name);
  console.log(age);
  var name = 'Lydia';
  let age = 21;
}

sayHi();
```

(1) ì½”ë“œ ì½ê¸° ì‹œì‘

- `function sayHi()` ì½”ë“œ ìì²´ê°€ Heapì— ì €ì¥ë¨.
- ì´ë•Œ `sayHi`ë¼ëŠ” ì´ë¦„ì´ Global Execution Context ì•ˆ Variable Environmentì— ì €ì¥ë˜ëŠ”ë°, sayHi -> Memory Heapì— ì €ì¥ëœ function objectì˜ ì°¸ì¡°ê°’ì´ ë“¤ì–´ê°.

(2) Global Execution Context ìƒì„±

â†’ Call Stack: [Global] â†’ [sayHi Execution Context]

- Call Stackì—ì„œ Global Execution Contextê°€ ì˜¬ë¼ê°€ê²Œ ë¨.
- sayHiëŠ” Memory Heap ì°¸ì¡°ë¡œ ë“±ë¡ë¨.

(3) `sayHi()` í˜¸ì¶œ

- í˜¸ì¶œì´ ì¼ì–´ë‚˜ë©´,
- JS ì—”ì§„ì€ Heapì— ìˆëŠ” sayHi function objectë¥¼ ë³´ê³ ,
- ìƒˆë¡œìš´ `sayHi Execution Context`ë¥¼ freshí•˜ê²Œ ë§Œë“ ë‹¤.

(4) sayHi Execution Context ìƒì„±

- sayHi Execution Contextì•ˆì— Variable Environment, Lexical Environmentê°€ ë§Œë“¤ì–´ì§„ë‹¤.
- ê·¸ë¦¬ê³  sayHi í•¨ìˆ˜ ì•ˆì— ìˆëŠ” ì„ ì–¸ë“¤(var, let) ì„ í˜¸ì´ìŠ¤íŒ…í•œë‹¤.

âœ”ï¸ ì¦‰,

- **var name** â†’ Variable Environmentì— ë“±ë¡í•˜ê³  ì´ˆê¸°í™”(undefined) í•´ì¤Œ

- **let age** â†’ Lexical Environmentì— ë“±ë¡í•˜ê³  ì´ˆê¸°í™”ëŠ” í•˜ì§€ ì•ŠìŒ (TDZ ìƒíƒœ)

(5) ì½”ë“œ ì‹¤í–‰
â†’ console.log(name); // undefined ì¶œë ¥
â†’ console.log(age); // ReferenceError
â†’ var name = 'Lydia'; (name ê°’ ì¬í• ë‹¹)
â†’ let age = 21; (age ê°’ ì´ˆê¸°í™” ë° í• ë‹¹)

> ì´ë•Œ (4)ë²ˆì—ì„œ í˜¸ì´ìŠ¤íŒ… ë°œìƒí•¨.
>
> **ğŸ¤”í˜¸ì´ìŠ¤íŒ…ì´ë€**?
>
> ë³€ìˆ˜ë‚˜ í•¨ìˆ˜ ì„ ì–¸ì´ ì‹¤í–‰ë˜ê¸° ì „ì— ë©”ëª¨ë¦¬ì— ë“±ë¡ë˜ëŠ” í˜„ìƒ
>
> - í•¨ìˆ˜ ì„ ì–¸ì€ ë©”ëª¨ë¦¬ì— ë°”ë¡œ ë“±ë¡ë˜ê³  ë°”ë¡œ ì´ˆê¸°í™” ë¨.
> - ë³€ìˆ˜ ì„ ì–¸ì€ ë©”ëª¨ë¦¬ì— ë“±ë¡ë˜ì§€ë§Œ ì²˜ë¦¬ë°©ì‹ì´ ë‹¤ë¦„(like `var`, `let`, `const`)

> **ğŸ¤”Variable Environment & Lexcival Environmentë€?**
>
> **Variable Environment**
>
> - í•¨ìˆ˜ ì‹¤í–‰ "ì´ˆê¸°"ì—ë§Œ ì¡´ì¬.
> - ì£¼ë¡œ var ë³€ìˆ˜ ì„ ì–¸ê³¼ function ì„ ì–¸ì„ í˜¸ì´ìŠ¤íŒ… ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤.
> - ì‹¤í–‰ ì¤‘ì—ëŠ” ë³„ ì˜ë¯¸ ì—†ì´, ì´ˆê¸° ë“±ë¡ìš©ìœ¼ë¡œë§Œ ì“°ì¸ë‹¤.
>
> **Lexical Environment**
>
> - ì‹¤ì œ í•¨ìˆ˜ê°€ ì‹¤í–‰ë˜ëŠ” ë™ì•ˆ ì‹ë³„ì(ë³€ìˆ˜, í•¨ìˆ˜ ì´ë¦„)ë¥¼ ì°¾ì•„ì•¼ í•  ë•Œ ì‚¬ìš©í•œë‹¤.
> - let, const ê°™ì€ ë¸”ë¡ ìŠ¤ì½”í”„ ë³€ìˆ˜ë¥¼ ê´€ë¦¬í•œë‹¤.
> - ìŠ¤ì½”í”„ ì²´ì¸ë„ ì—¬ê¸°ì„œ ì—°ê²°í•œë‹¤. (Outer Environment Referenceë¥¼ í†µí•´)
>
> ---
>
> ```text
> sayHi Execution Context
>  - Variable Environment (VE)
>      - var name (ì´ˆê¸°í™”: undefined)
>  - Lexical Environment (LE)
>      - let age (ì´ˆê¸°í™” X â†’ TDZ ìƒíƒœ)
>      - ìŠ¤ì½”í”„ ì²´ì¸ ì •ë³´(Outer Environment Reference)
> ```

### Outer Environment Referenceë€?

í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(ë˜ëŠ” ìŠ¤ì½”í”„) ê°€
ì™¸ë¶€(ë¶€ëª¨) ìŠ¤ì½”í”„ë¥¼ ì°¸ì¡°í•˜ëŠ” í¬ì¸í„°(ì°¸ì¡°ê°’)

- í•¨ìˆ˜ê°€ ì‹¤í–‰ë  ë•Œ ë§Œë“¤ì–´ì§€ëŠ” Lexical Environment(LE) ì•ˆì—ëŠ”
- "ë‚´ ë°”ê¹¥(Outer) í™˜ê²½ì´ ë­ì˜€ëŠ”ì§€ ê¸°ì–µí•˜ëŠ” ë§í¬" ê°€ ë“¤ì–´ ìˆë‹¤.

ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” "ë ‰ì‹œì»¬ ìŠ¤ì½”í”„(Lexical Scope)" ë¥¼ ë”°ë¥´ê¸° ë•Œë¬¸ì—,
ì½”ë“œë¥¼ "ì–´ë””ì„œ ì •ì˜í–ˆëŠëƒ"ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìŠ¤ì½”í”„ë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.
ê·¸ë˜ì„œ í•¨ìˆ˜ ì•ˆì—ì„œ ë³€ìˆ˜ë¥¼ ì°¾ì„ ë•Œ:

1. í˜„ì¬ ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸(Lexical Environment) ì•ˆì—ì„œ ë¨¼ì € ì°¾ê³ 
2. ì—†ìœ¼ë©´ Outer Environment Referenceë¥¼ ë”°ë¼ ì˜¬ë¼ê°€ì„œ ë¶€ëª¨ ìŠ¤ì½”í”„ì—ì„œ ì°¾ëŠ”ë‹¤
3. ê·¸ë˜ë„ ì—†ìœ¼ë©´ ê·¸ ë¶€ëª¨ì˜ ë¶€ëª¨ë¥¼ ë”°ë¼ê°€ê³ ...
4. ëê¹Œì§€ ê°€ë©´ Global Execution Contextê¹Œì§€ ë„ë‹¬

**Ex**

```js
const a = 1;

function outer() {
  const b = 2;

  function inner() {
    const c = 3;
    console.log(a, b, c);
  }

  inner();
}

outer();
```

```
Global Execution Context
  - Lexical Environment
    - a â†’ 1
    - outer â†’ function object

outer Execution Context
  - Lexical Environment
    - b â†’ 2
    - inner â†’ function object
    - Outer Environment Reference â†’ Global LE

inner Execution Context
  - Lexical Environment
    - c â†’ 3
    - Outer Environment Reference â†’ outer LE
```

- `inner`ëŠ” cë¥¼ ëª» ì°¾ìœ¼ë©´ `outer()` í•¨ìˆ˜ì˜ Lexical Environment(ë¶€ëª¨) ë¡œ ê°€ê³ ,
- `outer()`ì—ì„œë„ ëª» ì°¾ìœ¼ë©´ Global Lexical Environment(ìµœìƒë‹¨ ë¶€ëª¨) ë¡œ ê°„ë‹¤.
